@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Base font and style setup */
  body {
    @apply font-sans text-neutral-800 dark:text-neutral-100;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Focus styles and accessibility */
  *:focus-visible {
    @apply outline-none ring-2 ring-offset-2 ring-primary-500 dark:ring-primary-400 dark:ring-offset-neutral-800;
  }
  
  /* Basic heading styles */
  h1 {
    @apply text-3xl md:text-4xl font-display font-semibold tracking-tight;
  }
  
  h2 {
    @apply text-2xl md:text-3xl font-display font-medium tracking-tight;
  }
  
  h3 {
    @apply text-xl md:text-2xl font-medium;
  }
}

@layer components {
  /* Character display styling - used in typing interface */
  .character-correct {
    @apply inline-block text-success-500 dark:text-success-300 font-medium;
    animation: pop-animation 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }

  .character-incorrect {
    @apply inline-block text-danger-500 dark:text-danger-300 font-medium;
  }

  /* Incorrect space visualization */
  .incorrect-space {
    @apply inline-block bg-danger-300/30 dark:bg-danger-500/30 rounded-[1px];
    min-width: 0.35em;
    height: 1.1em;
    vertical-align: text-bottom;
  }

  /* Animation definitions - refined for smoother experience */
  @keyframes pop-animation {
    0% { transform: scale(0.95); }
    50% { transform: scale(1.15); }
    100% { transform: scale(1); }
  }

  /* Blinking cursor animation */
  .animate-blink {
    animation: blink-caret 1s step-end infinite;
  }

  @keyframes blink-caret {
    from, to { border-color: transparent }
    50% { border-color: currentColor; }
  }

  /* Refined wobble animation for incorrect input */
  @keyframes wobble-animation {
    0%, 100% { transform: translateX(0); }
    15% { transform: translateX(-3px) rotate(-1deg); }
    30% { transform: translateX(3px) rotate(1deg); }
    45% { transform: translateX(-3px) rotate(-1deg); }
    60% { transform: translateX(3px) rotate(1deg); }
    75% { transform: translateX(-2px) rotate(-0.5deg); }
    90% { transform: translateX(2px) rotate(0.5deg); }
  }

  .input-wobble {
    animation: wobble-animation 0.35s ease-in-out;
  }

  /* Shake animation for errors */
  @keyframes shake-animation {
    0% { transform: translateX(0); }
    15% { transform: translateX(-4px); }
    30% { transform: translateX(4px); }
    45% { transform: translateX(-3px); }
    60% { transform: translateX(3px); }
    75% { transform: translateX(-1px); }
    90% { transform: translateX(1px); }
    100% { transform: translateX(0); }
  }
  
  .shake-error {
    animation: shake-animation 0.4s ease-in-out;
  }
  
  /* Fade transition for elements */
  .fade-transition {
    @apply transition-opacity duration-300 ease-in-out;
  }
  
  /* Scale transition for interactive elements */
  .scale-transition {
    @apply transition-transform duration-200 ease-out;
  }
}